name: release
on:
   pull_request:
      branches:
      - main
jobs:
   build:
      runs-on: ubuntu-latest
      steps:
      -  name: Checkout
         uses: actions/checkout@v2
         with:
            fetch-depth: 0
      -  name: GitTools
         uses: GitTools/actions/gitversion/setup@v0.9.9
         with:
            versionSpec: 5.x
            includePrerelease: false
      -  name: Display GitVersion config
         uses: gittools/actions/gitversion/execute@v0.9.9
         with:
            additionalArguments: /showConfig
      -  name: Determine Version
         uses: gittools/actions/gitversion/execute@v0.9.9
      -  name: Display SemVer
         run: |
            echo "SemVer: $GITVERSION_SEMVER"
      -  uses: gittools/actions/gitreleasemanager/publish@v0.9.2
         name: Publish release with GitReleaseManager
         with:
            token: ${{ secrets.GITHUB_TOKEN }}
            owner: "christianeiselt"
            repository: "Advent-of-Code-2020"
            tagName: ${{ steps.gitversion.outputs.SemVer }}